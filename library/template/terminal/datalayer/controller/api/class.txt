<?php

namespace [#namespace];

use Model\Db[#dbName]\Db[#dbName];
use PhpMx\Input;
use PhpMx\Request;

class [#className]
{
    /** Lista todos os registros da tabela [#className] */
    function list()
    {
        return Db[#dbName]::$[#tableName]->getAll_schemeAll([#ignoredFields]);
    }

    /** Adiciona um registro na tabela [#className] */
    function create(?array $scheme = null)
    {
        $input = new Input($scheme ?? Request::data());

[#createInputfields]

        $data = $input->dataRecived();

        return Db[#dbName]::[#tableName]()->_arraySet($data)->_save()->idKey();
    }

    /** Retorna um registro da tabela [#className] */
    function show(string $[#tableName]Key)
    {
        return Db[#dbName]::$[#tableName]->getOneKey_schemeAll([#ignoredFields], $[#tableName]Key, $[#tableName]Key, 'Registro não encontrado');
    }

    /** Modifica um registro da tabela [#className] */
    function update(string $[#tableName]Key, ?array $scheme = null)
    {
        $input = new Input($scheme ?? Request::data());

[#updateInputFields]

        $data = $input->dataRecived();

        return Db[#dbName]::$[#tableName]->getOneKey($[#tableName]Key, 'Registro não encontrado')->_arraySet($data)->_save()->idKey();
    }

    /** Remove um registro da tabela [#className] */
    function delete(string $[#tableName]Key)
    {
        $record = Db[#dbName]::$[#tableName]->getOneKey($[#tableName]Key, 'Registro não encontrado');
        $record->_delete(true)->_save();

        return STS_OK;
    }
}